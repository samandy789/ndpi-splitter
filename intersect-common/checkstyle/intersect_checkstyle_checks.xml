<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
	  "-//Puppy Crawl//DTD Check Configuration 1.2//EN"
	  "http://www.puppycrawl.com/dtds/configuration_1_2.dtd">

<module name="Checker">
    <property name="severity" value="warning" />

    <!-- RULE SUPPRESSIONS -->
    <module name="SuppressionFilter">
        <property name="file" value="${checkstyle_config_dir}/project-suppressions.xml" />
    </module>

    <!--
		HEADER CHECKS see http://checkstyle.sourceforge.net/config_header.html
	-->
    <module name="RegexpHeader">
        <property name="headerFile" value="${checkstyle_config_dir}/java.header" />
        <property name="fileExtensions" value="java" />
    </module>

    <module name="TreeWalker">
        <property name="tabWidth" value="4" />

        <!--
			ANNOTATIONS CHECKS see
			http://checkstyle.sourceforge.net/config_annotation.html
		-->
        <module name="AnnotationUseStyle">
            <property name="elementStyle" value="compact_no_array" />
            <property name="closingParens" value="never" />
            <property name="trailingArrayComma" value="never" />
        </module>
        <module name="MissingDeprecated" />
        <module name="MissingOverride">
            <property name="javaFiveCompatibility" value="true" />
        </module>

        <!--
			BLOCK CHECKS see http://checkstyle.sourceforge.net/config_blocks.html
		-->
        <module name="EmptyBlock">
            <property name="option" value="text" />
        </module>
        <module name="LeftCurly">
            <property name="option" value="nl" />
        </module>
        <module name="NeedBraces" />
        <module name="RightCurly">
            <property name="option" value="alone" />
        </module>
        <module name="AvoidNestedBlocks">
            <property name="allowInSwitchCase" value="true" />
        </module>

        <!--
			CLASS DESIGN CHECKS see
			http://checkstyle.sourceforge.net/config_design.html
		-->
        <module name="VisibilityModifier" />
        <module name="FinalClass" />
        <module name="InterfaceIsType" />
        <!--
			turned off - seems unecessary and throws off coverage <module
			name="HideUtilityClassConstructor" />
		-->
        <module name="MutableException" />
        <module name="ThrowsCount">
            <property name="max" value="5" />   <!-- may need to tweak/remove this -->
        </module>
        <!--<module name="DesignForExtension"/> too strict -->

        <!--
			CODING CHECKS see
			http://checkstyle.sourceforge.net/config_coding.html
		-->
        <module name="CovariantEquals" />
        <module name="DoubleCheckedLocking" />
        <module name="EmptyStatement" />
        <module name="EqualsAvoidNull" />
        <module name="EqualsHashCode" />
        <module name="IllegalInstantiation">
            <property name="classes" value="java.lang.Boolean,java.lang.String" />
        </module>
        <module name="InnerAssignment" />
        <module name="MagicNumber" />
        <module name="MissingSwitchDefault" />
        <module name="ModifiedControlVariable" />

        <!--
			We suppress errors generated by not having custom exceptions in the
			classpath.
		-->
        <module name="RedundantThrows">
            <property name="allowUnchecked" value="true" />
            <property name="logLoadErrors" value="true" />
            <property name="suppressLoadErrors" value="true" />
        </module>
        <module name="SimplifyBooleanExpression" />
        <module name="SimplifyBooleanReturn" />
        <module name="StringLiteralEquality" />
        <module name="NestedIfDepth">
            <property name="max" value="2" />
        </module>
        <module name="NestedTryDepth">
            <property name="max" value="2" />
        </module>
        <module name="NoClone" />
        <module name="NoFinalizer" />
        <module name="IllegalCatch">
            <property name="illegalClassNames"
                value="java.lang.Exception, java.lang.Throwable, java.lang.RuntimeException, java.lang.NullPointerException" />
        </module>
        <module name="IllegalThrows">
            <property name="illegalClassNames" value="java.lang.Error, java.lang.RuntimeException, java.lang.Throwable" />
        </module>
        <module name="PackageDeclaration" />
        <module name="JUnitTestCase" />
        <module name="ReturnCount">
            <property name="max" value="4" />
        </module>
        <module name="IllegalType">
            <property name="ignoredMethodNames" value="getInstance" />
        </module>
        <module name="DeclarationOrder" />
        <module name="ParameterAssignment" />
        <module name="DefaultComesLast" />
        <module name="FallThrough" />
        <module name="MultipleStringLiterals">
            <property name="allowedDuplicates" value="2" />
        </module>
        <module name="MultipleVariableDeclarations" />
        <module name="UnnecessaryParentheses" />
        <!-- <module name="ArrayTrailingComma" />  seems unnatural -->
        <!-- <module name="AvoidInlineConditionals" />  -->
        <!-- <module name="FinalLocalVariable" />  too strict -->
        <!-- <module name="HiddenField" /> too strict -->
        <!-- <module name="MissingCtor" />  too strict -->
        <module name="SuperClone" />
        <module name="SuperFinalize" />
        <module name="ExplicitInitialization" /> <!-- too strict? -->
        <!-- <module name="RequireThis" /> too strict -->

        <!--
			IMPORTS CHECKS see
			http://checkstyle.sourceforge.net/config_imports.html
		-->
        <module name="AvoidStarImport" />
        <module name="AvoidStaticImport">
            <property name="excludes" value="org.junit.Assert.*, org.mockito.Mockito.*, org.mockito.Matchers.*" />
        </module>
        <!--
            disallowed imports - can turn on later if needed <module name="IllegalImport"> <property name="illegalPkgs"
            value="sun" /> </module>
        -->
        <module name="RedundantImport" />
        <module name="UnusedImports" />
        <module name="ImportOrder">
            <property name="groups" value="java,javax,org,junit,com,au.org.intersect" />
            <property name="ordered" value="false" />
            <property name="separated" value="true" />
            <property name="option" value="top" />
        </module>

        <module name="ImportControl">
            <property name="file" value="${checkstyle_config_dir}/import-control.xml" />
        </module>

        <!--
            METRICS CHECKS (currently set to default thresholds) see
            http://checkstyle.sourceforge.net/config_metrics.html
        -->
        <module name="BooleanExpressionComplexity">
            <property name="max" value="3" />
        </module>
        <module name="ClassDataAbstractionCoupling">
            <property name="max" value="14" />
            <!--
				Doubled from original 7 due to need to for questionnaire builders
				for CAS.
			-->
        </module>
        <module name="ClassFanOutComplexity">
            <property name="max" value="20" />
        </module>
        <module name="CyclomaticComplexity">
            <property name="max" value="10" />
        </module>
        <module name="NPathComplexity">
            <property name="max" value="200" />
        </module>
        <module name="JavaNCSS">
            <property name="methodMaximum" value="50" />
            <property name="classMaximum" value="1500" />
            <property name="fileMaximum" value="2000" />
        </module>

        <!--
			MISCELLANEOUS CHECKS see
			http://checkstyle.sourceforge.net/config_misc.html
		-->
        <!--
			<module name="TodoComment"/> don't warn on these as Hudson shows them
			separately
		-->
        <!--
			<module name="Translation"/> checks properties files vs usage - not
			needed now
		-->
        <module name="UncommentedMain" />
        <module name="UpperEll" />
        <module name="ArrayTypeStyle" />
        <!-- <module name="FinalParameters"/> too strict -->
        <module name="Indentation">
            <property name="basicOffset" value="4" />
            <property name="braceAdjustment" value="0" />
            <property name="caseIndent" value="4" />
        </module>
        <!-- <module name="TrailingComment" /> too strict -->

        <!--
			MODIFIER CHECKS see
			http://checkstyle.sourceforge.net/config_modifier.html
		-->
        <module name="ModifierOrder" />
        <module name="RedundantModifier">
            <property name="tokens" value="VARIABLE_DEF,ANNOTATION_FIELD_DEF" />
        </module>

        <!--
			NAMING CHECKS see
			http://checkstyle.sourceforge.net/config_naming.html
		-->
        <!-- Many abstract classes do not correspond to this naming scheme -->
        <!-- They use too many different naming schemes                    -->
        <!-- <module name="AbstractClassName" />  -->
        <module name="ClassTypeParameterName" />
        <module name="ConstantName" />
        <module name="LocalFinalVariableName" />
        <module name="LocalVariableName" />
        <module name="MemberName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$" />
        </module>
        <module name="MethodName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$" />
        </module>
        <module name="StaticVariableName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$" />
        </module>
        <module name="TypeName">
            <property name="format" value="^[A-Z][a-zA-Z0-9]*$" />
        </module>
        <module name="MethodTypeParameterName" />
        <module name="PackageName" />
        <module name="ParameterName" />

        <!--
            SIZE VIOLATION CHECKS see http://checkstyle.sourceforge.net/config_sizes.html (currently set to default
            thresholds)
        -->
        <module name="ExecutableStatementCount">
            <property name="max" value="30" />
        </module>
        <module name="LineLength">
            <property name="max" value="120" />
            <property name="ignorePattern" value="^import .+;$" />
        </module>
        <module name="MethodLength">
            <property name="max" value="100" />
            <property name="countEmpty" value="true" />
        </module>
        <module name="AnonInnerLength">
            <property name="max" value="20" />
        </module>
        <module name="ParameterNumber">
            <property name="max" value="7" />
        </module>
        <module name="OuterTypeNumber" />

        <!--
			WHITESPACE CHECKS see
			http://checkstyle.sourceforge.net/config_whitespace.html
		-->
        <module name="GenericWhitespace" />
        <module name="EmptyForInitializerPad" />
        <module name="EmptyForIteratorPad" />
        <module name="MethodParamPad" />
        <module name="NoWhitespaceAfter">
            <property name="tokens" value="ARRAY_INIT,BNOT,DEC,DOT,INC,LNOT,UNARY_MINUS,UNARY_PLUS" />
        </module>
        <module name="NoWhitespaceBefore" />
        <module name="OperatorWrap" />
        <module name="ParenPad" />
        <module name="TypecastParenPad" />
        <module name="WhitespaceAfter" />
        <module name="WhitespaceAround">
            <!--
				REMOVED RCURLY AS IT WAS MESSING UP ANNOTATION ARRAY INITIALIZERS
			-->
            <property name="tokens"
                value="ASSIGN, BAND, BAND_ASSIGN, BOR, BOR_ASSIGN, BSR, BSR_ASSIGN, BXOR, BXOR_ASSIGN, COLON, DIV, DIV_ASSIGN, EQUAL, GE, GT, LAND, LCURLY, LE, LITERAL_ASSERT, LITERAL_CATCH, LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY, LITERAL_FOR, LITERAL_IF, LITERAL_RETURN, LITERAL_SYNCHRONIZED, LITERAL_TRY, LITERAL_WHILE, LOR, LT, MINUS, MINUS_ASSIGN, MOD, MOD_ASSIGN, NOT_EQUAL, PLUS, PLUS_ASSIGN, QUESTION, SL, SLIST, SL_ASSIGN, SR, SR_ASSIGN, STAR, STAR_ASSIGN, TYPE_EXTENSION_AND" />
            <!--
                DEFAULT: <property name="tokens" value="ASSIGN, BAND, BAND_ASSIGN, BOR, BOR_ASSIGN, BSR, BSR_ASSIGN,
                BXOR, BXOR_ASSIGN, COLON, DIV, DIV_ASSIGN, EQUAL, GE, GT, LAND, LCURLY, LE, LITERAL_ASSERT,
                LITERAL_CATCH, LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY, LITERAL_FOR, LITERAL_IF, LITERAL_RETURN,
                LITERAL_SYNCHRONIZED, LITERAL_TRY, LITERAL_WHILE, LOR, LT, MINUS, MINUS_ASSIGN, MOD, MOD_ASSIGN,
                NOT_EQUAL, PLUS, PLUS_ASSIGN, QUESTION, RCURLY, SL, SLIST, SL_ASSIGN, SR, SR_ASSIGN, STAR, STAR_ASSIGN,
                TYPE_EXTENSION_AND"/>
            -->
        </module>

        <!-- Checks for Javadoc comments.                     -->
        <!-- See http://checkstyle.sf.net/config_javadoc.html -->
        <!-- Javadoc is not required on non-interface methods and variables -->
        <module name="JavadocMethod">
            <property name="excludeScope" value="private" />
            <property name="allowMissingPropertyJavadoc" value="true" />
        </module>
        <module name="JavadocType">
            <property name="scope" value="private" />
        </module>
        <module name="JavadocVariable">
            <property name="excludeScope" value="private" />
        </module>
        <!-- all JavaDoc must have the right style          -->
        <module name="JavadocStyle">
            <property name="scope" value="private" />
            <property name="checkFirstSentence" value="false" />
        </module>

    </module>

    <!--
        GENERIC REGEXP CHCEKS used to check for other bad practices see
        http://checkstyle.sourceforge.net/config_regexp.html
    -->
    <module name="RegexpMultiline">
        <property name="id" value="consoleOutput" />
        <property name="format" value="System\.(out)|(err)\.print(ln)?\(" />
        <property name="message" value="System.out/err. should be replaced with logger debugging." />
    </module>

    <module name="RegexpMultiline">
        <property name="format" value="\.printStackTrace\(\s*\)" />
        <property name="message"
            value="printStackTrace directs output to the console and should be replaced with logger debugging." />
    </module>

    <module name="RegexpMultiline">
        <property name="format" value="^\s+.\s+@param\s+Description of the Parameter" />
        <property name="message"
            value="Default parameter description text present in the code.  Replace with meaningful description." />
    </module>

    <module name="RegexpMultiline">
        <property name="format" value="^\s+.\s+@return\s+Description of the Return Value" />
        <property name="message"
            value="Default return value description text present in the code.  Replace with meaningful description." />
    </module>

    <module name="RegexpMultiline">
        <property name="format" value="((public)|(protected))\s+void\s+finalize\(\s*\)" />
        <property name="message" value="finalize not allowed" />
    </module>

    <module name="RegexpMultiline">
        <property name="format" value="(Boolean)\s+(is)[\p{L}\s]*\(\)" />
        <property name="message"
            value="Boolean getter method has to match java bean naming convention (eg Boolean getDefault() )." />
    </module>

    <!--
        DUPLICATE CODE CHECKS (turned off - docs suggest using Simian instead - see
        http://checkstyle.sourceforge.net/config_duplicates.html) <module name="StrictDuplicateCode"> <property
        name="min" value="12" /> </module>
    -->

    <!--
        MISCELLANEOUS CHECKS see http://checkstyle.sourceforge.net/config_misc.html <module name="NewlineAtEndOfFile" />
    -->

    <!--
		SIZE VIOLATION CHECKS see
		http://checkstyle.sourceforge.net/config_sizes.html
	-->
    <module name="FileLength">
        <property name="max" value="1000" />
    </module>

    <!--
		WHITESPACE CHECKS see
		http://checkstyle.sourceforge.net/config_whitespace.html
	-->
    <module name="FileTabCharacter" />

</module>